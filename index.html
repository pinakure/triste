<!DOCTYPE html>
<html>
    <head>
        <title>Triste Auto Play Bot</title>
        <script src="jquery.js"></script>
        <script src="common.js"></script>
        <script src="shapes.js"></script>
        <script src="tetris.js"></script>
        <script src="tetrismap.js"></script>
        <script src="tetrispiece.js"></script>
        <script src="simulation.js"></script>
        <link rel="stylesheet" type="text/css" href="triste.css" />
    </head>
    <body><div id="info">haohsodao</div></body>
    <script>
        function createCanvas(id, width, height, parent='body',show_id=true){
            $(parent).append(`<div class="canvaswrapper canvaswrapper-${id}">
                                <canvas id="${id}" width="${width}" height="${height}"></canvas>
                                <br/>${show_id?id:''}<span class="score"></span>
                            </div>`);
            var wrapper_node = $(`div.canvaswrapper-${id}`);
            var canvas_node  = $(`#${id}`);
            return canvas_node;
        }
        function createCanvasBox(index=0){
            $('body').append(`<div class="canvasbox canvas-${index}"></div>`);
            return $(`div.canvasbox canvas-${index}`);
        }
        function createScoreBox(index){
            $(`.canvas-${index}`).append(`<div class="scorebox-${index}" id="scorebox${index}">[]</div>`);
            return $(`.scorebox-${index}`);
        }
        function initialize(){
            var width  = 10;//8;
            var height = 20;//12;
            createCanvas("initial_state", width, height);
            createCanvas("best_movement", width, height);
            for(a=0; a<4; a++){
                createCanvas(`angle_${a}`, width, height);
                createCanvasBox(a);
                for(x=0; x<width; x++){
                    createCanvas(`angle_${a}_${x}`, width, height,`.canvas-${a}`, false);
                }
                createScoreBox(a);
            }
            createCanvas(`map`, width, height);
            Tetris.initialize(width, height);
        }

        initialize();
    </script>
</html>